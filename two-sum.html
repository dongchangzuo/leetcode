<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two Sum Problem Visualization</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="main-container">
        <!-- Problem Panel -->
        <div class="problem-panel">
            <h2>Two Sum Problem</h2>
            <div class="problem-section">
                <h3>Problem Description</h3>
                <p>Given an array of integers nums and an integer target, return indices of the two numbers such that they add up to target.</p>
                <p>You may assume that each input would have exactly one solution, and you may not use the same element twice.</p>
                <p>You can return the answer in any order.</p>
            </div>
            <div class="problem-section">
                <h3>Example</h3>
                <div class="example-box">
                    <h4>Input:</h4>
                    <pre>nums = [2,11,15,7], target = 9</pre>
                    <h4>Output:</h4>
                    <pre>[0,3]</pre>
                    <h4>Explanation:</h4>
                    <p>Because nums[0] + nums[3] == 9, we return [0, 3].</p>
                </div>
            </div>
            <div class="problem-section">
                <h3>Constraints:</h3>
                <ul class="constraint-list">
                    <li>2 ≤ nums.length ≤ 10⁴</li>
                    <li>-10⁹ ≤ nums[i] ≤ 10⁹</li>
                    <li>-10⁹ ≤ target ≤ 10⁹</li>
                    <li>Only one valid answer exists.</li>
                </ul>
            </div>
        </div>

        <!-- Animation Container -->
        <div class="animation-container">
            <div class="controls">
                <button class="primary" id="startBtn">Start</button>
                <button class="primary" id="pauseBtn" disabled>Pause</button>
                <button class="warning" id="resetBtn">Reset</button>
                <div class="speed-control">
                    <span>Speed:</span>
                    <input type="range" id="speedControl" min="1" max="10" value="5">
                </div>
            </div>

            <div class="string-container">
                <div class="string-display" id="arrayDisplay"></div>
                <div class="hash-map-display" id="hashMapDisplay">
                    <h4>Hash Map:</h4>
                    <div class="map-content"></div>
                </div>
                <div class="status-display" id="statusDisplay"></div>
                <div class="result-display" id="resultDisplay"></div>
            </div>
        </div>

        <!-- Explanation Panel -->
        <div class="explanation-panel">
            <h2>Solution Steps</h2>
            <div class="explanation-step">
                <h3>Step 1: Example</h3>
                <p>We'll use the following example:</p>
                <div class="code-highlight">
                    <pre>nums = [2, 11, 15, 7]</pre>
                    <pre>target = 9</pre>
                </div>
            </div>
            <div class="explanation-step">
                <h3>Step 2: Algorithm</h3>
                <p>We'll use a hash map to store the numbers we've seen and their indices. For each number:</p>
                <ol>
                    <li>Calculate the complement (target - current number)</li>
                    <li>Check if complement exists in hash map</li>
                    <li>If found, return current index and complement's index</li>
                    <li>If not found, add current number and its index to hash map</li>
                </ol>
            </div>
            <div class="explanation-step">
                <h3>Time Complexity</h3>
                <p>O(n) - We traverse the array once</p>
                <h3>Space Complexity</h3>
                <p>O(n) - We store at most n elements in the hash map</p>
            </div>
        </div>
    </div>

    <script>
        class TwoSumVisualizer {
            constructor() {
                this.arrayDisplay = document.getElementById('arrayDisplay');
                this.statusDisplay = document.getElementById('statusDisplay');
                this.resultDisplay = document.getElementById('resultDisplay');
                this.startBtn = document.getElementById('startBtn');
                this.pauseBtn = document.getElementById('pauseBtn');
                this.resetBtn = document.getElementById('resetBtn');
                this.speedControl = document.getElementById('speedControl');
                
                this.nums = [2, 11, 15, 7];
                this.target = 9;
                this.speed = 1000;
                this.isRunning = false;
                this.isPaused = false;
                this.currentStep = 0;
                
                this.setupEventListeners();
            }

            setupEventListeners() {
                this.startBtn.addEventListener('click', () => this.startVisualization());
                this.pauseBtn.addEventListener('click', () => this.togglePause());
                this.resetBtn.addEventListener('click', () => this.reset());
                this.speedControl.addEventListener('input', (e) => {
                    this.speed = 1100 - (e.target.value * 100);
                });
            }

            togglePause() {
                this.isPaused = !this.isPaused;
                this.pauseBtn.textContent = this.isPaused ? 'Resume' : 'Pause';
            }

            async startVisualization() {
                if (this.isRunning) return;
                
                this.isRunning = true;
                this.isPaused = false;
                this.startBtn.disabled = true;
                this.pauseBtn.disabled = false;
                this.displayArray(this.nums);
                this.displayHashMap(new Map());
                
                const map = new Map();
                let result = null;

                for (let i = 0; i < this.nums.length; i++) {
                    await this.highlightNumber(i, this.nums[i]);
                    const complement = this.target - this.nums[i];
                    
                    this.updateStatus(`Looking for complement: ${complement}`);
                    
                    if (map.has(complement)) {
                        result = [map.get(complement), i];
                        await this.highlightPair(map.get(complement), i);
                        break;
                    }
                    
                    map.set(this.nums[i], i);
                    this.displayHashMap(map);
                    await this.delay();
                }

                if (result) {
                    this.resultDisplay.textContent = `Found solution: [${result[0]}, ${result[1]}]`;
                } else {
                    this.resultDisplay.textContent = 'No solution found';
                }

                this.isRunning = false;
                this.startBtn.disabled = false;
                this.pauseBtn.disabled = true;
            }

            displayArray(nums) {
                this.arrayDisplay.innerHTML = '';
                nums.forEach((num, index) => {
                    const charBox = document.createElement('div');
                    charBox.className = 'char-box';
                    charBox.textContent = num;
                    charBox.dataset.index = index;
                    this.arrayDisplay.appendChild(charBox);
                });
            }

            async highlightNumber(index, value) {
                const boxes = this.arrayDisplay.getElementsByClassName('char-box');
                boxes[index].classList.add('current');
                this.updateStatus(`Checking number: ${value}`);
                await this.delay();
                boxes[index].classList.remove('current');
            }

            async highlightPair(index1, index2) {
                const boxes = this.arrayDisplay.getElementsByClassName('char-box');
                boxes[index1].classList.add('in-window');
                boxes[index2].classList.add('in-window');
                await this.delay();
            }

            updateStatus(message) {
                this.statusDisplay.innerHTML = `<span class="step-number">Step ${this.currentStep + 1}</span>
                    <span class="step-content">${message}</span>`;
                this.currentStep++;
            }

            displayHashMap(map) {
                const mapContent = document.querySelector('.map-content');
                mapContent.innerHTML = '';
                
                if (map.size === 0) {
                    mapContent.innerHTML = '<div class="map-empty">Empty</div>';
                    return;
                }

                for (const [key, value] of map.entries()) {
                    const entry = document.createElement('div');
                    entry.className = 'map-entry';
                    entry.innerHTML = `
                        <span class="map-key">${key}</span>
                        <span class="map-arrow">→</span>
                        <span class="map-value">${value}</span>
                    `;
                    mapContent.appendChild(entry);
                }
            }

            reset() {
                this.arrayDisplay.innerHTML = '';
                document.querySelector('.map-content').innerHTML = '<div class="map-empty">Empty</div>';
                this.statusDisplay.innerHTML = '';
                this.resultDisplay.textContent = '';
                this.currentStep = 0;
                this.isRunning = false;
                this.isPaused = false;
                this.startBtn.disabled = false;
                this.pauseBtn.disabled = true;
                this.pauseBtn.textContent = 'Pause';
            }

            async delay() {
                return new Promise(resolve => {
                    const checkPause = () => {
                        if (this.isPaused) {
                            setTimeout(checkPause, 100);
                        } else {
                            setTimeout(resolve, this.speed);
                        }
                    };
                    checkPause();
                });
            }
        }

        // Initialize the visualizer when the page loads
        window.addEventListener('load', () => {
            new TwoSumVisualizer();
        });
    </script>
</body>
</html> 